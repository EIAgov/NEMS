* STACK.RUL USED IN TEST.RUL

$STACK
$PUSH 1 %OBJ
$LOOKUP Y %OBJ
$PUSH 2 %VLOOK
$POP  1 O
$POP  2 V
$TEXT
 ...FROM STACKS:  VALUE OF %%O = %%V .
$TEXT
    FROM MATRIX:
$ANALYZE DISPLAY ROW %OBJ //LEVEL
$TEXT

$PUSH 1 %OBJ
$QUEUE 1 O
$POP   1 O2
 ...QUEUE OF %%O = %%O2
$TEXT

$SET NUMBER = 5
 NOW WE SHALL LOOP OVER 1ST %%NUMBER COLUMNS OF MATRIX
$STACK
$ANALYZE SUBMAT *

$LOOP
 %%NUMBER . %COLUMN
$PUSH 1 %COLUMN
$IF %%NUMBER = 1 THEN ENDLOOP
$CALC NUMBER = NUMBER - 1
$NEXT C
$TEXT
 === END PUSH LOOP ===
$TEXT

$LOOP
:NEXTCOL
$POP 1 COLUMN
$QUEUE 2 %%COLUMN
 %%NUMBER .  %%COLUMN
$IF %%NUMBER = 5 THEN ENDLOOP
$CALC NUMBER = NUMBER + 1
$GOTO NEXTCOL
$ENDLOOP

$TEXT
 NOW WE REPEAT FROM STACK 2...OUTPUT SHOULD BE SAME
$TEXT

$SET NUMBER = 1
$LOOP
:NEXTCOL
$POP 2 COLUMN
 %%NUMBER .  %%COLUMN
$CALC NUMBER = NUMBER + 1
$IF %%NUMBER > 5 THEN ENDLOOP
$GOTO NEXTCOL
$ENDLOOP
$TEXT
  === END STACK.RUL ===
$TEXT
